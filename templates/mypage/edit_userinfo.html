<!DOCTYPE html>
<html lang="ko"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/defaultManageLayout}">
	<head>
		<title>유저 | 내정보 수정</title>
	</head>
	<div layout:fragment="manage_sidemenu"></div>
	<div layout:fragment="content" class="w-100">
		<div class="side-content-container">
			<div class="table-title-container">
	            <h1 class="table-title">내정보 수정</h1>
	        </div>
	        <div class="side-content">
				<form class="form-editUser" id="chgInfo" action="/mypage/editUserInfo.do" method="post" enctype="multipart/form-data">
					<div class="edit-userinfo-container max-w-640">
						<div class="input-container">
							<label>
								<span class="label-txt">아이디</span>
								<input type="text" name="user_id" id="user_id" th:value="${dto.user_id}" readonly>
							</label>
						</div>
						<div class="input-container">
							<label>
								<span class="label-txt">비밀번호</span>
								<input type="password" class="password mr-10" name="password" readonly>
								<button class="btn tbl-type-2 chk-pw" type="button" onclick="ChgPwPopup()">비밀번호 변경</button>
							</label>
						</div>
						<div class="input-container">
							<label>
								<span class="label-txt">닉네임</span>
								<input type="text" name="user_nickname" id="user_nickname" class="mr-10" placeholder="닉네임은 10글자 이하로 입력해주세요" th:value="${dto.user_nickname}" maxlength="10">
								<button type="button" name="duplicateNickname" onclick="checkDuplicateNick()" class="btn tbl-type-2 check">중복확인</button>
								<span id="messageNick" class="form-msg"></span>
							</label>
						</div>
						<div class="input-container">
							<label>
								<span class="label-txt">이름</span>
								<input type="text" name="user_name" th:value="${dto.user_name}" maxlength="9">
								<span id="messageName" class="form-msg "></span>
							</label>
						</div>
						<div class="input-container input-tel">
							<label>
								<span class="label-txt">휴대전화</span>
								<input type="number" name="tel1" style="width:90px" maxlength="3" th:value="${dto.tel.substring(0,3)}" oninput="maxLengthCheck(this)" class="tel">&nbsp;&nbsp;-&nbsp;&nbsp; 
								<input type="number" name="tel2" style="width:90px"maxlength="4" th:value="${dto.tel.substring(4,8)}" oninput="maxLengthCheck(this)" class="tel">&nbsp;&nbsp;-&nbsp;&nbsp;
								<input type="number" name="tel3" style="width:90px"maxlength="4" th:value="${dto.tel.substring(9)}" oninput="maxLengthCheck(this)" class="tel">
								<span id="messageTel" class="form-msg"></span>
							</label>
						</div>
						<div class="input-container">
							<label>
								<span class="label-txt">이메일</span>
								<input type="text" id="email" name="email" th:value="${dto.email}" class="mr-10" required>
								<button type="button" name="duplicateEmail" onclick="checkDuplicateEmail()" class="btn tbl-type-2 check">중복확인</button>
								<span id="messageEmail" class="form-msg"></span>
							</label>
						</div>
						<div class="msg-contaiener mt-20 mb-10 txt-left">
							<p th:text="${message}" class="font-size-16 txt-green"></p>
						</div>
						<div class="separator mb-20"></div>
						<div class="mb-20 flex-between-container">
							<a href="/mypage/deleteUser.do" class="font-size-14 txt-gray">회원탈퇴</a>
							<label>
								<input type="button" class="btn tbl-type-1 btn_cacelEditInfo" id="cacelEditInfo" value="취소" th:onclick="|location.href='@{/mypage/userPostList.do}'|" >
								<input type="button" class="btn tbl-submit btn_updateInfo" id="updateInfo" value="수정" onclick="editInfo()">
							</label>
						</div>
					</div>
				</form>
				<script>
	               document.addEventListener("DOMContentLoaded", function() {
	                        document.getElementById("user_nickname").addEventListener("input", function() {
	                            isNickChecked = false;
	                            document.getElementById("messageNick").innerText = "";
	                        });
	                        document.getElementById("email").addEventListener("input", function() {
	                            isEmailChecked = false;
	                            document.getElementById("messageEmail").innerText = "";
	                        });
	                    });
	            </script>
             </div>
		</div>
	</div>
</html>